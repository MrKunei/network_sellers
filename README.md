# RocketData

## Задачи:
1. Реализовать модель сети по продаже техники, иерархической структуру из 5 уровней.
2. В админ-панели добавить:
   - ссылку на "Поставщика"
   - фильтр по названию города
   - admin action, очищает задолженнность('debt') у выбранных объектов
3. Реализовать с помощью DRF функционал CRUD для объектов поставщик и продукт.
   Фильтр по названию страны поставщика.
   Фильр по id продукта.
   Вывод поставщиков задолженность которых превышает среднюю задолженность всех объектов.
4. Права доступа к API только у активных сотрудников и только к объектам сети с которыми связаны.
5. По запросу через API генерировать qr код с контактами объекта сети и отправлять на e-mail пользователя.

Celery задачи:
- автоматически каждые 3 часа и увеличивать задолженность перед поставщиком на случайное число от 5 до 500;
- автоматически в 6:30 каждый день и уменьшать задолженность перед поставщиком на случайное число от 100 до 10 000;
- если action из задания №3 предыдущей части применяется более чем к 20 объектам,очистку данных нужно производить асинхронно;

6. В админ панели используя JS, для объектов сети добавить кнопку, копирующую электронную почту из контактов в буфер обмена.
   
---

Реализация модели сети по продаже электроники, представляющую собой иерархическую структуру из 5 уровней.

Для начала работы скопируйте репозиторий на локальную машину.

Создайте виртуальное окружение и установите зависимости:
`pip install -r requirements.txt`

Предварительно создав пустую базу данных PostgreSQl.
Меняем настройки Django settings.py на подключение к своей базе данных.
`DATABASES = {
   "default": {
   ....... ,
   .......
   }
   `
   
Используя backup базы данных, файл  network_seller, восстановить у себя на локальном пк.

Для проверки работы выполнения задач переходим в терминал.
Переходим в дериктории проекта и активировав виртуальное окружение, выполняем следующие команды в отдельных вкладках терминала:
1. Запускаем Django проект
`python manage.py runserver`
2. Запуск сервера Redis
`redis-service`
3. Запускаем Celery worker
`celery -A network_sellers worker -l INFO`
4. Запускаем Celery beat
`celery -A network_sellers beat -l INFO`
